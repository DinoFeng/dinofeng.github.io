"use strict";(self["webpackChunkcamera_test"]=self["webpackChunkcamera_test"]||[]).push([[876],{5876:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var a=i(3673),o=i(2323);const s={class:"camera_outer"},n=["width","height"],d=["width","height"],r={key:0,class:"img_bg_camera"},c=(0,a._)("p",null,"效果预览",-1),h=["src"],g={class:"button"},l=(0,a.Uk)("打开摄像头"),m=(0,a.Uk)("关闭摄像头"),v=(0,a.Uk)("拍照"),u=(0,a.Uk)("GetInfo");function w(e,t,i,w,C,f){const p=(0,a.up)("q-btn"),k=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.j4)(k,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.info),1),(0,a._)("div",s,[(0,a._)("video",{id:"videoCamera",width:e.videoWidth,height:e.videoHeight,autoplay:""},null,8,n),(0,a._)("canvas",{id:"canvasCamera",style:{display:"none"},width:e.videoWidth,height:e.videoHeight},null,8,d),e.imgSrc?((0,a.wg)(),(0,a.iD)("div",r,[c,(0,a._)("img",{class:"tx_img",src:e.imgSrc,alt:""},null,8,h)])):(0,a.kq)("",!0),(0,a._)("div",g,[(0,a.Wm)(p,{onClick:t[0]||(t[0]=t=>e.getCompetence())},{default:(0,a.w5)((()=>[l])),_:1}),(0,a.Wm)(p,{onClick:t[1]||(t[1]=t=>e.stopNavigator())},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(p,{onClick:t[2]||(t[2]=t=>e.setImage())},{default:(0,a.w5)((()=>[v])),_:1}),(0,a.Wm)(p,{onClick:t[3]||(t[3]=t=>e.getInfo())},{default:(0,a.w5)((()=>[u])),_:1})])])])),_:1})}i(71),i(7965),i(6016);const C=(0,a.aZ)({name:"CameraTest",data(){return{videoWidth:750,videoHeight:350,imgSrc:"",thisCancas:null,thisContext:null,thisVideo:null,openVideo:!1,info:""}},mounted(){},methods:{async getInfo(){const e=await navigator.mediaDevices.enumerateDevices();this.info=e},getCompetence(){var e=this;e.thisCancas=document.getElementById("canvasCamera"),e.thisContext=this.thisCancas.getContext("2d"),e.thisVideo=document.getElementById("videoCamera"),e.thisVideo.style.display="block",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;return t?new Promise((function(i,a){t.call(navigator,e,i,a)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});var t={audio:!1,video:{width:this.videoWidth,height:this.videoHeight,transform:"scaleX(-1)"}};navigator.mediaDevices.getUserMedia(t).then((function(t){"srcObject"in e.thisVideo?e.thisVideo.srcObject=t:e.thisVideo.src=window.URL.createObjectURL(t),e.thisVideo.onloadedmetadata=function(t){e.thisVideo.play()}})).catch((e=>{console.log(e)}))},setImage(){var e=this;e.thisContext.drawImage(e.thisVideo,0,0);var t=this.thisCancas.toDataURL("image/png");e.imgSrc=t},stopNavigator(){this.thisVideo.srcObject.getTracks()[0].stop()}}});var f=i(4260),p=i(4090),k=i(6281),_=i(7518),U=i.n(_);const b=(0,f.Z)(C,[["render",w]]),y=b;U()(C,"components",{QLayout:p.Z,QBtn:k.Z})}}]);