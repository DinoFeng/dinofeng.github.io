(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{5128:function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("q-page",{staticClass:"flex flex-center"},[t("div",{staticClass:"sr__scan__item"},[e.scanFlag?t("video",{ref:"scannerRef",attrs:{id:"video","webkit-playsinline":"true",playsinline:"true"}}):e._e(),t("q-btn",{on:{click:e.doScan}},[e._v("Scan")])],1)])},o=[],c=(t("ddb0"),t("224f")),i=t("b178"),s={name:"PageIndex",data(){return{scanFlag:!0}},async mounted(){console.info("mounted"),setTimeout((()=>{this.doScan()}),50)},methods:{async doScan(){const{codeReader:e,isMediaStreamAPISupported:n}=await this.getCodeReader();if(!n)return void console.error("Your device does not support scanning operation. Please change the device and try again!");const{videoDevices:t}=await this.getVideoDevices(e);return t&&t.length>0?this.scan(e,t[0].deviceId,"video"):void 0},async getVideoDevices(e){const n=[];return await e.listVideoInputDevices().then((e=>{n.push(...e)})).catch((()=>{console.error("Your device does not support scanning operation. Please change the device and try again!")})),{videoDevices:n}},async getCodeReader(){const e=new Map,n=[c["BarcodeFormat"].CODE_39,c["BarcodeFormat"].CODABAR,c["BarcodeFormat"].QR_CODE];e.set(c["DecodeHintType"].POSSIBLE_FORMATS,n);const t=new c["BrowserMultiFormatReader"](e),a=navigator&&navigator.mediaDevices&&"enumerateDevices"in navigator.mediaDevices;return{codeReader:t,isMediaStreamAPISupported:a}},async scan(e,n,t){const a=new Audio("/scan.mp3");return e.decodeFromVideoDevice(n,t,Object(i["b"])((async(n,t)=>{if(n&&(a.muted&&(a.muted=!1),a.play(),console.info(`scan success, value is:${n}`),setTimeout((()=>{e.reset()}))),t&&!(t instanceof c["NotFoundException"]))throw console.error(t),t}),1e3))}}},r=s,d=(t("c6cd9"),t("2877")),u=Object(d["a"])(r,a,o,!1,null,"3a87767c",null);n["default"]=u.exports},7499:function(e,n,t){},c6cd9:function(e,n,t){"use strict";t("7499")}}]);